"0","# Average height and weight by species"
"0","starwars_jac <- starwars %>% group_by(name) %>%"
"0","  mutate(num_films=length(unlist(films)),"
"0","         height_to_mass_ratio = height / mass) %>%"
"0","  ungroup() "
"0","# put each film on a different row"
"0","# ie. character-film level dataset"
"0","starwars_unnest <- starwars %>%"
"0","  mutate(film= factor(films,levels=film_chron_order)) %>%"
"0","  select(-films) %>%"
"0","  mutate(episode=as.integer(film)) %>%"
"0","  # bucket species"
"0","  mutate(species_collapsed=case_when("
"0","    !(species %in% c('Human','Droid')) ~ 'Other',"
"0","    TRUE ~ species"
"0","  ))"
"0","starwars_species_film <- starwars_unnest %>% "
"0","  count(episode,species_collapsed) %>% drop_na() "
"0","starwars_unnest_gender <- starwars_unnest %>%"
"0","  count(episode,gender)"
"0","species_summ <- starwars_jac %>% group_by(species) %>%"
"0","  drop_na(c(height,mass)) %>%"
"0","  summarise(average_height=mean(height),"
"0","            average_mass=mean(mass),"
"0","            count=sum(n())) %>% ungroup() %>%"
"0","  mutate(height_to_mass_ratio = average_height / average_mass) %>%"
"0","  filter(count!=1) # don't look at species that only have one member"
"0","homeworld_summ <- starwars_jac %>%"
"0","  count(homeworld,species) %>% drop_na() %>%"
"0","  arrange(desc(n)) %>%"
"0","  filter(n >= 3)"
"0","## Drop missing height and weight values for scatter plot"
"0","# Also drop Jabba and Yoda because they are outliers"
"0","starwars_ht_wt <- starwars_jac %>% drop_na(c(height,mass,gender)) %>%"
"0","  filter(!str_detect(name,'Jabba|Yoda')) %>% "
"0","  filter(num_films >= 3)"
